<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Morning by mo-group</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Morning</h1>
        <h2>study</h2>
        <a href="https://github.com/mo-group/morning" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1 id="d3-js-">D3.js 入門</h1>
<p><img src="http://2.bp.blogspot.com/-XppRAAsXnX0/UwBNUAWk5yI/AAAAAAAALU0/RqjjDdqgMzU/s1600/d3-js.png =595x260" alt=""></p>
<blockquote>
<p><a href="http://d3js.org/">D3.js</a> 在 Github 上面的 Star 數跟 <a href="https://github.com/jquery/jquery">jQuery</a>、<a href="https://github.com/angular/angular.js">Angular.js</a> 在伯仲之間，雖然解決是不同面向的問題，但在台灣的社群跟討論相對比較稀少。要細數 D3 帶來的功能會花到相當大的篇幅，這篇打算只先簡單帶到幾個面向的介紹和討論。</p>
</blockquote>
<h3 id="-">簡介</h3>
<p>D3 是 Data-Driven Documents 也就是 3 個 D 的縮寫，字面上的意思是以資料驅動的文件，有些人可能會誤解，以為 D3 只能操作 SVG 其實並不盡然，一般 HTML 的 DOM 也可以用 D3 進行操作。</p>
<p>開發團隊在資訊視覺化已經深耕了十年，也繼承了先前 <a href="http://mbostock.github.io/protovis/">Protovis</a> 的經驗，D3 可以說是非常的完善，資料繫結、排序、數學、幾何、地理資訊、投影、顏色等等，不少是經過了充分研究跟有論文理論基礎的。</p>
<h3 id="-namespace">命名空間 Namespace</h3>
<p>D3 裡面所有的功能都包裝在 d3 命名空間裡面，例如：<code>d3.select</code>、<code>d3.scale.linear</code>、<code>d3.event</code>、<code>d3.rgb</code>、<code>d3.csv</code> 等等，詳細的內容可以參照 <a href="https://github.com/mbostock/d3/wiki/API-Reference">API 清單</a>。</p>
<p>這邊值得一提的是，有別於一般常用的 amd、commonjs 或 es6 的 JavaScript 模組，D3 是採用作者自行開發的 <a href="https://github.com/mbostock/smash">mbostock/smash</a> 建構工具來編譯模組的匯入。</p>
<pre><code class="lang-javascript">import &quot;bar&quot;;

function foo() {
  return &quot;foo&quot; + bar();
}
</code></pre>
<p>整個專案絕大多數的部分皆為一個方法放一個檔案，要查看原始碼非常方便，若對 <code>d3.color</code> 有疑問可直接查找 <code>d3/src/color/color.js</code>、對 <code>d3.rgb</code> 有疑問則是找 <code>d3/src/color/rgb.js</code> 即可。</p>
<h3 id="-selector">選擇器 Selector</h3>
<p>操作 DOM 是前端 CSS 和 JavaScript 開發者的第一堂課，也造就了 jQuery 的大紅大紫，D3 包裝了 <a href="http://www.w3.org/TR/selectors-api/">W3C Selectors API</a> 的 <code>querySelector</code> 和 <code>querySelectorAll</code> 兩個方法，做成了自己的 <code>d3.select</code> 和 <code>d3.selectAll</code>，而相關的操作都跟 jQuery 非常接近，也讓熟悉的開發者有快速學會的契機。</p>
<p>這邊簡單的利用一個 <code>targets</code> 變數暫存選取結果，有利於後面的範例：</p>
<pre><code class="lang-javascript">var targets = d3.selectAll(&#39;div&#39;);
</code></pre>
<p>下面是幾個常用方法：</p>
<h4 id="-attr">.attr</h4>
<p>可以設定 DOM 的 attributes，例如設定 class：</p>
<pre><code class="lang-javascript">targets.attr(&#39;class&#39;, &#39;chart&#39;)
</code></pre>
<p>也可以傳入物件一次設定數個屬性</p>
<pre><code class="lang-javascript">d3.select(&#39;line&#39;)
     .attr({
       &#39;x1&#39;: 0,
       &#39;y1&#39;: 0,
       &#39;x2&#39;: 100,
       &#39;y2&#39;: 100
    });
</code></pre>
<h4 id="-style">.style</h4>
<p>對圖像的函式庫來說，樣式就是吃飯傢伙，有了 <code>.style</code> 這個方法可以操作 css 後，設計師的思考就可以無邊無際的發展來完成創作，例如調整透明度：</p>
<pre><code class="lang-javascript">targets.style(&#39;opacity&#39;, 0.75)
</code></pre>
<h4 id="-text">.text</h4>
<p>做 Tooltip 或是 Lable 等等會常用到的一個方法，跟 jQuery 一樣可以塞字串進去：</p>
<pre><code class="lang-javascript">targets.text(&#39;這是詳細的資訊&#39;)
</code></pre>
<h4 id="-append">.append</h4>
<p>跟 jQuery 的 <code>.append</code> 一樣可以把東西插入到元素裡面的最尾端位置：</p>
<pre><code class="lang-javascript">targets.append(&#39;p&#39;)
</code></pre>
<h4 id="-">繼續往下選？</h4>
<p>D3 一樣有類似 jQuery 的 <code>.find</code> 的方法，支援從選取結果繼續選取，只要重複的使用 <code>.select</code> 和 <code>.selectAll</code> 這兩個方法就可以了：</p>
<pre><code class="lang-javascript">d3.select(&#39;body&#39;).selectAll(&#39;div&#39;).selectAll(&#39;.row&#39;)
</code></pre>

        </section>

        <aside id="sidebar">
          <a href="https://github.com/mo-group/morning/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/mo-group/morning/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/mo-group/morning"></a> is maintained by <a href="https://github.com/mo-group">mo-group</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>


  </body>
</html>
